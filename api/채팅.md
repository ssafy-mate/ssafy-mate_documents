# 채팅 API

## 채팅방 목록 불러오기

| TYPE |        URL        | TOKEN |
| :--: | :---------------: | :---: |
|  GET | /api/chat/room/{userId}  |   X   |

### Request

- URL GET (본인 아이디)

### Response

- 채팅 목록 불러오기 성공(목록이 있는 경우)

```json
{
  "status": 200,
  "success": true,
  "message": "",
  "roomList": [
           {  
              "roomId" : "123-124",
              "userId" : 123,
              "userName": "조원빈",
              "profileImg": "/src/main/~~~",
              "content": "안녕하세요",
              "sentTime":"2022-01-17T17:03:36.336763"
           },
           {  
              "roomId" : "122-124",
              "userId" : 122,
              "userName": "소정은",
              "profileImg": "/src/main/~~~",
              "content": "안녕하세요",
              "sentTime":"2022-01-17T17:03:26.336763"
           } 
  ]
}
```
  userId는 상대방 아이디

- 채팅 목록 불러오기 성공(목록이 없는 경우)

```json
{
  "status": 200,
  "success": true,
  "message": "",
  "roomList": []
}
```

- 채팅 목록 불러오기 실패

```json
{
  "status": 401,
  "success": false,
  "message": "인증에 실패했습니다."
}
```


## 메세지 보내기
```java
// "/app/ssafymate/chat/sendMessage/{roomId}"
@MessageMapping("/ssafymate/chat/sendMessage/{roomId}")
@SendTo("/queue/ssafymate/chat/{roomId}")
```

```json
{
	"roomId" : "1-2",
	"senderId": 1,
	"sentTime": "2022-01-17T17:03:37.336763",
	"content": "안녕하세요."
}
```


## 대화 내용 불러오기


| TYPE |        URL        | TOKEN |
| :--: | :---------------: | :---: |
|  GET |   /api/chat/log   |   X   |

### Request

```json
{
  "user_id1" : "123",
  "user_id2" : "124"
}
```

### Response

- 대화 내용이 있는 경우 대화 내용 불러오기 성공(페이징 처리)

```json
{
  "status": 200,
  "success": true,
  "message": "",
  "contentList": [
           {
              "id": 1,
              "senderId" : 123,
              "username": "조원빈",
              "content": "안녕하세요",
              "sentTime":"2022-01-17T17:03:36.336763"
           },
           {
              "id": 3,
              "senderId" : 122,
              "username": "소정은",
              "content": "안녕하세요",
              "sentTime":"2022-01-17T17:03:26.336763"
           },
           {
              "id": 5,
              "senderId" : 123,
              "username": "조원빈",
              "content": "안녕하세요",
              "sentTime":"2022-01-17T17:03:36.336763"
           },
           {
              "id": 7,
              "senderId" : 122,
              "username": "소정은",
              "content": "안녕하세요",
              "sentTime":"2022-01-17T17:03:26.336763"
           },
           {
              "id": 8,
              "senderId" : 123,
              "username": "조원빈",
              "content": "안녕하세요",
              "sentTime":"2022-01-17T17:03:36.336763"
           },
  ]
}
```
	contentList[0]이 오래된 것, 마지막 데이터가 최신 데이터

- 대화 내용이 없는 경우
```json
{
  "status": 200,
  "success": true,
  "message": "",
  "contentList": []
}
```
